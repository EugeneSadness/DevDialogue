Приложение А. Иллюстрации и скриншоты инфраструктуры

В данном приложении представлены диаграммы и скриншоты, иллюстрирующие ключевые компоненты и процессы DevOps-инфраструктуры, разработанной для приложения-мессенджера. Эти материалы служат визуальным подтверждением реализованных решений и помогают лучше понять архитектуру и этапы внедрения.

1. **Рисунок 2.1. Архитектура системы мессенджера**
   Данная диаграмма отображает общую архитектуру разработанного мессенджера, включая клиентскую часть (веб-интерфейс и мобильное приложение), серверную часть на базе Node.js и Express, базу данных PostgreSQL и шлюз API на основе Nginx. На схеме показаны взаимодействия между компонентами и их модульная структура, что подчеркивает применение принципов микросервисной архитектуры для упрощения масштабирования и поддержки.

2. **Рисунок 2.2. Контейнеризация с использованием Docker**
   На этом скриншоте представлен пример Dockerfile для одного из сервисов мессенджера, а также список созданных Docker-образов для каждого компонента системы. Это иллюстрирует процесс изоляции приложений и их зависимостей, что обеспечивает одинаковую работу окружения на всех этапах — от разработки до продакшн.

3. **Рисунок 2.3. Оркестрация через Kubernetes**
   Данная диаграмма показывает структуру Kubernetes-кластера, включая поды, сервисы и конфигурации для автоматического масштабирования. На скриншоте видны настройки Horizontal Pod Autoscaler, которые позволяют увеличивать или уменьшать количество подов в зависимости от нагрузки, обеспечивая гибкость и отказоустойчивость системы.

4. **Рисунок 2.4. Конвейер CI/CD в GitHub Actions**
   Скриншот демонстрирует настроенный рабочий процесс в GitHub Actions, включающий этапы сборки, тестирования и развертывания. Видно, как автоматизированные проверки кода и тесты запускаются при каждом коммите, а успешное прохождение всех этапов приводит к развертыванию обновлений на staging- и production-окружениях с использованием стратегии Blue-Green Deployment.

5. **Рисунок 2.5. Мониторинг с помощью Prometheus и Grafana**
   На этом скриншоте представлена панель Grafana с графиками, отображающими метрики производительности системы, такие как использование CPU, объем сетевого трафика и количество запросов к API. Это иллюстрирует, как мониторинг в реальном времени помогает выявлять узкие места и оперативно реагировать на изменения состояния инфраструктуры.

6. **Рисунок 2.6. Логирование с использованием стека ELK**
   Скриншот показывает интерфейс Kibana с примерами логов, собранных из различных сервисов мессенджера. Настроенные фильтры позволяют быстро находить ошибки и анализировать события, что упрощает диагностику проблем и повышает прозрачность работы системы.

7. **Рисунок 2.7. Настройка безопасности с Vault**
   Данная иллюстрация демонстрирует процесс настройки Vault для управления секретами, включая создание политик доступа и хранение ключей API. Это подчеркивает важность защиты конфиденциальных данных и минимизации рисков утечек в распределенной системе.

8. **Рисунок 2.8. Масштабируемость и отказоустойчивость**
   На диаграмме показана схема репликации базы данных PostgreSQL с разделением на master- и slave-узлы, а также настройки Kubernetes для распределения нагрузки между подами. Это иллюстрирует, как система справляется с пиковыми нагрузками и обеспечивает бесперебойную работу даже при сбоях отдельных компонентов.

Все представленные материалы являются результатом практической реализации DevOps-подхода в рамках данного проекта. Они подтверждают эффективность выбранных инструментов и решений для создания надежной и гибкой инфраструктуры мессенджера.

## Дополнительные иллюстрации для других глав

Ниже представлены дополнительные рисунки и диаграммы, которые могут быть использованы в теоретической части, заключении или других разделах диплома для более полного раскрытия темы DevOps и его применения в разработке мессенджера.

9. **Рисунок 1.1. Основные принципы DevOps**
   Данная диаграмма иллюстрирует ключевые принципы DevOps, такие как культура сотрудничества, автоматизация, непрерывная доставка и мониторинг. На схеме показаны связи между этими принципами и их влияние на процесс разработки и эксплуатации программного обеспечения.

10. **Рисунок 1.2. Сравнение традиционной разработки и DevOps-подхода**
   На этой диаграмме представлены различия между традиционной моделью разработки (Waterfall) и DevOps-подходом. Схема показывает, как DevOps сокращает время между этапами разработки, тестирования и развертывания за счет автоматизации и интеграции.

11. **Рисунок 1.3. Инструменты DevOps-экосистемы**
   Данный рисунок отображает экосистему инструментов, используемых в DevOps, включая системы контроля версий (Git), CI/CD-инструменты (GitHub Actions, Jenkins), контейнеризацию (Docker), оркестрацию (Kubernetes) и мониторинг (Prometheus, Grafana). Это помогает понять, как различные инструменты взаимодействуют для создания эффективного рабочего процесса.

12. **Рисунок 3.1. Результаты внедрения DevOps**
   На этой диаграмме представлены количественные и качественные результаты внедрения DevOps в проект мессенджера, такие как сокращение времени развертывания, уменьшение количества ошибок и повышение удовлетворенности команды. Это визуализирует эффективность подхода в рамках данного исследования.

13. **Рисунок 3.2. Перспективы развития инфраструктуры мессенджера**
   Данная схема иллюстрирует возможные направления дальнейшего развития DevOps-инфраструктуры мессенджера, включая внедрение географически распределенной архитектуры, использование продвинутых стратегий кэширования и расширение мониторинга. Это подчеркивает потенциал для улучшения системы в будущем.

## Гайд по эмуляции скриншотов и диаграмм

Ниже приведены пошаговые инструкции и скрипты для быстрого создания визуальных материалов, иллюстрирующих описанные выше рисунки. Эти гайды помогут эмулировать скриншоты и диаграммы для включения в дипломную работу.

### 1. Эмуляция Рисунка 2.1. Архитектура системы мессенджера
- **Инструмент**: Используй онлайн-сервис для создания диаграмм, например, Draw.io (https://app.diagrams.net/) или Lucidchart.
- **Шаги**:
  1. Открой Draw.io в браузере.
  2. Создай новую диаграмму, выбрав шаблон для архитектурных схем (например, "Software" или "Network").
  3. Добавь блоки для клиентской части (веб и мобильное приложение), серверной части (Node.js + Express), базы данных (PostgreSQL) и шлюза API (Nginx).
  4. Соедини блоки стрелками, показывающими взаимодействие (например, клиент → Nginx → сервер → база данных).
  5. Добавь подписи к каждому блоку и сохрани диаграмму как изображение (File → Export as → PNG).
- **Результат**: Полученная диаграмма будет иллюстрировать архитектуру мессенджера.

### 2. Эмуляция Рисунка 2.2. Контейнеризация с использованием Docker
- **Инструмент**: Текстовый редактор и терминал.
- **Шаги**:
  1. Создай файл `Dockerfile` с примером конфигурации для Node.js-сервиса:
     ```bash
     echo -e "FROM node:16-alpine\nWORKDIR /app\nCOPY package*.json ./\nRUN npm install\nCOPY . .\nEXPOSE 3000\nCMD [\"node\", \"server.js\"]" > Dockerfile
     ```
  2. Открой терминал и выполни команду для отображения списка Docker-образов (даже если их нет, это будет выглядеть как скриншот):
     ```bash
     docker images
     ```
  3. Сделай скриншот открытого файла `Dockerfile` в текстовом редакторе (например, VS Code) и результата команды `docker images` в терминале.
- **Результат**: Скриншот с кодом Dockerfile и списком образов будет иллюстрировать процесс контейнеризации.

### 3. Эмуляция Рисунка 2.3. Оркестрация через Kubernetes
- **Инструмент**: Текстовый редактор, терминал и Draw.io.
- **Шаги**:
  1. Создай пример файла конфигурации Kubernetes для Horizontal Pod Autoscaler:
     ```bash
     echo -e "apiVersion: autoscaling/v2\nkind: HorizontalPodAutoscaler\nmetadata:\n  name: messenger-api-hpa\nspec:\n  scaleTargetRef:\n    apiVersion: apps/v1\n    kind: Deployment\n    name: messenger-api\n  minReplicas: 2\n  maxReplicas: 10\n  metrics:\n  - type: Resource\n    resource:\n      name: cpu\n      target:\n        type: Utilization\n        averageUtilization: 70" > hpa.yaml
     ```
  2. Сделай скриншот этого файла в текстовом редакторе.
  3. В Draw.io создай простую диаграмму Kubernetes-кластера с несколькими подами, сервисами и стрелками, показывающими масштабирование.
  4. Сохрани диаграмму как изображение.
- **Результат**: Скриншот конфигурации HPA и диаграмма кластера покажут оркестрацию через Kubernetes.

### 4. Эмуляция Рисунка 2.4. Конвейер CI/CD в GitHub Actions
- **Инструмент**: Текстовый редактор и браузер.
- **Шаги**:
  1. Создай пример файла workflow для GitHub Actions:
     ```bash
     echo -e "name: CI/CD Pipeline\non: [push, pull_request]\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n    - uses: actions/checkout@v3\n    - name: Setup Node.js\n      uses: actions/setup-node@v3\n      with:\n        node-version: '16'\n    - name: Install Dependencies\n      run: npm install\n    - name: Run Tests\n      run: npm test\n    - name: Build\n      run: npm run build\n  deploy:\n    needs: build\n    runs-on: ubuntu-latest\n    steps:\n    - name: Deploy to Staging\n      run: echo 'Deploying to staging...'\n    - name: Deploy to Production\n      if: github.ref == 'refs/heads/main'\n      run: echo 'Deploying to production with Blue-Green strategy...'" > .github/workflows/ci-cd.yml
     ```
  2. Сделай скриншот этого файла в текстовом редакторе.
  3. Открой GitHub в браузере, зайди в раздел Actions любого репозитория (или создай тестовый), чтобы показать интерфейс с историей запусков workflow (даже если запусков нет, интерфейс сам по себе будет иллюстрацией).
  4. Сделай скриншот страницы GitHub Actions.
- **Результат**: Скриншоты файла workflow и интерфейса GitHub Actions покажут настройку CI/CD.

### 5. Эмуляция Рисунка 2.5. Мониторинг с помощью Prometheus и Grafana
- **Инструмент**: Браузер и локальная установка Grafana (опционально).
- **Шаги**:
  1. Если у тебя нет установленного Grafana, открой в браузере официальный сайт Grafana (https://grafana.com/) и найди примеры дашбордов в разделе "Dashboards" или "Solutions".
  2. Сделай скриншот страницы с примером дашборда, показывающего графики CPU, сети и других метрик.
  3. Альтернативно, если хочешь локальную эмуляцию, установи Grafana и Prometheus с помощью Docker:
     ```bash
     docker run -d -p 3000:3000 grafana/grafana
     docker run -d -p 9090:9090 prom/prometheus
     ```
  4. Открой http://localhost:3000, войди в Grafana (логин/пароль по умолчанию: admin/admin), добавь источник данных Prometheus (http://localhost:9090) и создай простой дашборд с любыми метриками.
  5. Сделай скриншот дашборда.
- **Результат**: Скриншот дашборда Grafana покажет мониторинг системы.

### 6. Эмуляция Рисунка 2.6. Логирование с использованием стека ELK
- **Инструмент**: Браузер и локальная установка Kibana (опционально).
- **Шаги**:
  1. Если у тебя нет установленного ELK-стека, открой в браузере официальный сайт Elastic (https://www.elastic.co/kibana) и найди примеры интерфейса Kibana с логами.
  2. Сделай скриншот страницы с примером интерфейса Kibana.
  3. Альтернативно, для локальной эмуляции установи ELK-стек с помощью Docker Compose (требуется файл `docker-compose.yml`):
     ```bash
     echo -e "version: '3'\nservices:\n  elasticsearch:\n    image: elasticsearch:7.17.9\n    environment:\n      - discovery.type=single-node\n    ports:\n      - 9200:9200\n  logstash:\n    image: logstash:7.17.9\n    ports:\n      - 5044:5044\n  kibana:\n    image: kibana:7.17.9\n    ports:\n      - 5601:5601\n    depends_on:\n      - elasticsearch" > docker-compose.yml
     docker-compose up -d
     ```
  4. Открой http://localhost:5601, настрой Kibana для подключения к Elasticsearch (http://elasticsearch:9200) и добавь тестовые логи, если возможно.
  5. Сделай скриншот интерфейса Kibana.
- **Результат**: Скриншот интерфейса Kibana покажет систему логирования.

### 7. Эмуляция Рисунка 2.7. Настройка безопасности с Vault
- **Инструмент**: Текстовый редактор, терминал и браузер.
- **Шаги**:
  1. Создай пример файла конфигурации для Vault:
     ```bash
     echo -e "storage \"file\" {\n  path = \"/vault/data\"\n}\nlistener \"tcp\" {\n  address = \"0.0.0.0:8200\"\n  tls_disable = 1\n}\napi_addr = \"http://0.0.0.0:8200\"\nui = true" > vault-config.hcl
     ```
  2. Сделай скриншот этого файла в текстовом редакторе.
  3. Открой в браузере официальный сайт Vault (https://www.vaultproject.io/) и найди пример интерфейса или CLI-команд для управления секретами.
  4. Сделай скриншот страницы или выполни тестовую команду в терминале, если Vault установлен:
     ```bash
     vault status
     ```
- **Результат**: Скриншоты конфигурации и интерфейса Vault покажут настройку безопасности.

### 8. Эмуляция Рисунка 2.8. Масштабируемость и отказоустойчивость
- **Инструмент**: Draw.io и текстовый редактор.
- **Шаги**:
  1. В Draw.io создай диаграмму, показывающую репликацию PostgreSQL (один master-узел и несколько slave-узлов) и Kubernetes-кластер с несколькими подами, соединенными стрелками для распределения нагрузки.
  2. Сохрани диаграмму как изображение.
  3. Создай пример конфигурации для репликации PostgreSQL:
     ```bash
     echo -e "# Master configuration\nwal_level = replica\nmax_wal_senders = 3\nwal_keep_size = 128MB\n\n# Slave configuration\nprimary_conninfo = 'host=master_host port=5432 user=replica password=secret'\nrecovery_target_timeline = 'latest'" > postgresql.conf
     ```
  4. Сделай скриншот этого файла в текстовом редакторе.
- **Результат**: Диаграмма и скриншот конфигурации покажут масштабируемость и отказоустойчивость системы.

### 9. Эмуляция Рисунка 1.1. Основные принципы DevOps
- **Инструмент**: Draw.io или любой другой сервис для создания диаграмм.
- **Шаги**:
  1. Открой Draw.io в браузере.
  2. Создай новую диаграмму, выбрав шаблон для концептуальных схем (например, "Basic" или "Flowchart").
  3. Добавь круги или прямоугольники с названиями принципов DevOps: "Культура сотрудничества", "Автоматизация", "Непрерывная доставка", "Мониторинг".
  4. Соедини элементы стрелками, чтобы показать их взаимосвязь (например, "Культура" влияет на "Автоматизацию", которая поддерживает "Непрерывную доставку").
  5. Добавь подписи и сохрани диаграмму как изображение (File → Export as → PNG).
- **Результат**: Диаграмма покажет основные принципы DevOps и их взаимосвязь, что идеально для теоретической части.

### 10. Эмуляция Рисунка 1.2. Сравнение традиционной разработки и DevOps-подхода
- **Инструмент**: Draw.io или Lucidchart.
- **Шаги**:
  1. Открой Draw.io в браузере.
  2. Создай новую диаграмму, выбрав шаблон для временных шкал или процессов.
  3. Нарисуй две линии времени: одну для традиционной разработки (Waterfall) с последовательными этапами (Анализ → Разработка → Тестирование → Развертывание) и длинными временными интервалами, другую для DevOps с короткими циклами и перекрывающимися этапами (непрерывная интеграция и доставка).
  4. Добавь подписи и визуальные элементы, такие как иконки для этапов.
  5. Сохрани диаграмму как изображение.
- **Результат**: Диаграмма наглядно покажет различия между традиционной разработкой и DevOps, что подойдет для теоретического раздела.

### 11. Эмуляция Рисунка 1.3. Инструменты DevOps-экосистемы
- **Инструмент**: Draw.io или Canva.
- **Шаги**:
  1. Открой Draw.io в браузере.
  2. Создай новую диаграмму, выбрав шаблон для сетевых или архитектурных схем.
  3. Добавь блоки или иконки для категорий инструментов DevOps: "Контроль версий (Git)", "CI/CD (GitHub Actions, Jenkins)", "Контейнеризация (Docker)", "Оркестрация (Kubernetes)", "Мониторинг (Prometheus, Grafana)".
  4. Соедини блоки стрелками, чтобы показать их взаимодействие в рабочем процессе (например, Git → CI/CD → Docker → Kubernetes → Мониторинг).
  5. Сохрани диаграмму как изображение.
- **Результат**: Диаграмма покажет экосистему инструментов DevOps, что будет полезно для теоретической части.

### 12. Эмуляция Рисунка 3.1. Результаты внедрения DevOps
- **Инструмент**: Draw.io, Canva или Google Sheets для создания графиков.
- **Шаги**:
  1. Открой Google Sheets или Draw.io в браузере.
  2. Если используешь Google Sheets, создай таблицу с вымышленными данными о результатах внедрения DevOps (например, "Время развертывания": до - 5 дней, после - 1 день; "Количество ошибок": до - 20, после - 5).
  3. Построй столбчатую или круговую диаграмму на основе этих данных.
  4. Если используешь Draw.io, создай простую диаграмму с столбцами или графиками, показывающими улучшения (например, сокращение времени развертывания, уменьшение ошибок).
  5. Сохрани диаграмму как изображение.
- **Результат**: График или диаграмма покажет результаты внедрения DevOps, что идеально для заключительной части.

### 13. Эмуляция Рисунка 3.2. Перспективы развития инфраструктуры мессенджера
- **Инструмент**: Draw.io или Lucidchart.
- **Шаги**:
  1. Открой Draw.io в браузере.
  2. Создай новую диаграмму, выбрав шаблон для дорожных карт или архитектурных схем.
  3. Добавь блоки для будущих улучшений: "Географически распределенная архитектура", "Продвинутые стратегии кэширования", "Расширение мониторинга".
  4. Соедини их с текущей архитектурой мессенджера (например, из Рисунка 2.1), чтобы показать развитие.
  5. Добавь подписи и сохрани диаграмму как изображение.
- **Результат**: Диаграмма покажет перспективы развития инфраструктуры, что подойдет для заключения или рекомендаций.

Эти инструкции и скрипты помогут быстро создать визуальные материалы для диплома, даже если у тебя нет полностью настроенной инфраструктуры. Каждый шаг можно адаптировать под твои инструменты и окружение. 