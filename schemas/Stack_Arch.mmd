graph TB
    %% –°—Ç–∏–ª–∏
    classDef developer fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
    classDef cicd fill:#e8f5e8,stroke:#388e3c,stroke-width:2px,color:#000
    classDef app fill:#bbdefb,stroke:#1976d2,stroke-width:2px,color:#000
    classDef database fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px,color:#000
    classDef monitoring fill:#fff3e0,stroke:#ff9800,stroke-width:2px,color:#000
    classDef security fill:#ffebee,stroke:#d32f2f,stroke-width:2px,color:#000
    classDef k8s fill:#e8eaf6,stroke:#326ce5,stroke-width:2px,color:#000

    %% –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
    DEV[üë®‚Äçüíª –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫]
    GIT[üìÅ Git Repository]
    
    %% CI/CD Pipeline
    subgraph CICD ["üöÄ CI/CD Pipeline"]
        GHA[GitHub Actions]
        BUILD[üî® –°–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç—ã]
        SCAN[üîç Security Scan<br/>Trivy]
        DOCKERHUB[üê≥ Docker Hub<br/>–†–µ–µ—Å—Ç—Ä –æ–±—Ä–∞–∑–æ–≤]
    end

    %% Kubernetes –∫–ª–∞—Å—Ç–µ—Ä
    subgraph K8S ["‚ò∏Ô∏è Kubernetes Cluster"]
        subgraph INGRESS_LAYER ["üåê Ingress Layer"]
            NGINX[Nginx Ingress<br/>WAF + Load Balancer]
        end
        
        subgraph APP_LAYER ["üì± Application Layer"]
            FRONTEND[Frontend Pods<br/>React/JS<br/>:3000]
            BACKEND[Backend Pods<br/>Node.js/Express<br/>:4000]
        end
        
        subgraph DATA_LAYER ["üíæ Data Layer"]
            PG_MASTER[(PostgreSQL Master<br/>–ó–∞–ø–∏—Å—å<br/>:5432)]
            PG_SLAVE1[(PostgreSQL Slave 1<br/>–ß—Ç–µ–Ω–∏–µ)]
            PG_SLAVE2[(PostgreSQL Slave 2<br/>–ß—Ç–µ–Ω–∏–µ)]
            REDIS[(Redis Cache<br/>:6379)]
        end
        
        subgraph DEPLOY_STRATEGY ["üîÑ Deployment Strategy"]
            BLUE[Blue Environment]
            GREEN[Green Environment]
            HPA[HPA<br/>Auto Scaling]
        end
    end

    %% –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
    subgraph SECURITY ["üîí Security Layer"]
        VAULT[HashiCorp Vault<br/>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞–º–∏<br/>:8200]
        NETWORK_POLICY[Network Policies<br/>–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞]
        TLS[TLS/HTTPS<br/>Let's Encrypt]
    end

    %% –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
    subgraph MONITORING ["üìä Monitoring & Logging"]
        PROMETHEUS[Prometheus<br/>–°–±–æ—Ä –º–µ—Ç—Ä–∏–∫<br/>:9090]
        GRAFANA[Grafana<br/>–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è<br/>:3001]
        NODE_EXP[Node Exporter<br/>:9100]
        PG_EXP[Postgres Exporter<br/>:9187]
        
        subgraph ELK ["üìã ELK Stack"]
            ELASTICSEARCH[(Elasticsearch<br/>–•—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤)]
            LOGSTASH[Logstash<br/>–û–±—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–≥–æ–≤]
            KIBANA[Kibana<br/>–ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤]
        end
    end

    %% –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
    USERS[üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏]

    %% –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö
    DEV --> GIT
    GIT -->|Webhook| GHA
    GHA --> BUILD
    BUILD --> SCAN
    SCAN --> DOCKERHUB
    DOCKERHUB -->|Pull Images| K8S

    %% –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ç—Ä–∞—Ñ–∏–∫
    USERS -->|HTTPS| NGINX
    NGINX --> FRONTEND
    NGINX --> BACKEND

    %% –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–≤—è–∑–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    FRONTEND <-->|WebSocket/REST API| BACKEND
    BACKEND -->|–ó–∞–ø–∏—Å—å SQL| PG_MASTER
    BACKEND -->|–ß—Ç–µ–Ω–∏–µ SQL| PG_SLAVE1
    BACKEND -->|–ß—Ç–µ–Ω–∏–µ SQL| PG_SLAVE2
    BACKEND <-->|–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ| REDIS

    %% –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –ë–î
    PG_MASTER -.->|–ü–æ—Ç–æ–∫–æ–≤–∞—è —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è| PG_SLAVE1
    PG_MASTER -.->|–ü–æ—Ç–æ–∫–æ–≤–∞—è —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è| PG_SLAVE2

    %% –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
    BACKEND <-->|–°–µ–∫—Ä–µ—Ç—ã| VAULT
    NETWORK_POLICY -.->|–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞| APP_LAYER
    TLS -.->|–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ| NGINX

    %% Blue-Green Deployment
    DOCKERHUB -.->|Deploy| BLUE
    DOCKERHUB -.->|Deploy| GREEN
    HPA -.->|–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ| BACKEND

    %% –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
    PROMETHEUS -->|–°–±–æ—Ä –º–µ—Ç—Ä–∏–∫| BACKEND
    PROMETHEUS -->|–°–±–æ—Ä –º–µ—Ç—Ä–∏–∫| PG_MASTER
    PROMETHEUS -->|–°–±–æ—Ä –º–µ—Ç—Ä–∏–∫| REDIS
    NODE_EXP -->|–°–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏| PROMETHEUS
    PG_EXP -->|–ú–µ—Ç—Ä–∏–∫–∏ –ë–î| PROMETHEUS
    PROMETHEUS --> GRAFANA

    %% –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
    BACKEND -.->|–õ–æ–≥–∏| LOGSTASH
    FRONTEND -.->|–õ–æ–≥–∏| LOGSTASH
    NGINX -.->|Access –ª–æ–≥–∏| LOGSTASH
    LOGSTASH --> ELASTICSEARCH
    ELASTICSEARCH --> KIBANA

    %% –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π
    class DEV developer
    class GIT,GHA,BUILD,SCAN,DOCKERHUB cicd
    class FRONTEND,BACKEND app
    class PG_MASTER,PG_SLAVE1,PG_SLAVE2,REDIS,ELASTICSEARCH database
    class PROMETHEUS,GRAFANA,NODE_EXP,PG_EXP,LOGSTASH,KIBANA monitoring
    class VAULT,NETWORK_POLICY,TLS security
    class NGINX,BLUE,GREEN,HPA k8s